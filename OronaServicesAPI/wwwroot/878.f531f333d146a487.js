"use strict";(self.webpackChunkoronasevices_ui=self.webpackChunkoronasevices_ui||[]).push([[878],{7878:(F,f,m)=>{m.r(f),m.d(f,{AuthenticationModule:()=>I});var c=m(6895),t=m(4006),e=m(4650),p=m(7361);let h=(()=>{class r{constructor(){this.validateConfirmPassword=i=>o=>{const l=o.value;if(""!==l)return l!==i.value?{mustMatch:!0}:null}}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var u=m(3060);function v(r,s){if(1&r&&(e.TgZ(0,"div",21),e._UZ(1,"span",22),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.Q6J("innerHTML",i.errorMessage,e.oJD)}}function Z(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Please provide a valid email"),e.qZA())}function w(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Email is required"),e.qZA())}function _(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Password is required"),e.qZA())}function U(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Confirmation is required"),e.qZA())}function C(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Passwords must match"),e.qZA())}let T=(()=>{class r{constructor(i,o,l){this.authService=i,this.passConfValidator=o,this.router=l,this.errorMessage="",this.validateControl=n=>this.registerForm.get(n).invalid&&this.registerForm.get(n).touched,this.hasError=(n,a)=>this.registerForm.get(n).hasError(a),this.registerUser=n=>{this.showError=!1;const a={...n};this.authService.registerUser("api/account/registration",{firstName:a.firstName,lastName:a.lastName,email:a.email,password:a.password,confirmPassword:a.confirm}).subscribe({next:d=>this.router.navigate(["/authentication/login"]),error:d=>{this.errorMessage=d.message,this.showError=!0}})}}ngOnInit(){this.registerForm=new t.cw({firstName:new t.NI(""),lastName:new t.NI(""),email:new t.NI("",[t.kI.required,t.kI.email]),password:new t.NI("",[t.kI.required]),confirm:new t.NI("")}),this.registerForm.get("confirm").setValidators([t.kI.required,this.passConfValidator.validateConfirmPassword(this.registerForm.get("password"))])}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(p.$),e.Y36(h),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register-user"]],decls:44,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","firstName",1,"col-form-label","col-sm-2"],[1,"col-md-5"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],["for","lastName",1,"col-form-label","col-sm-2"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],["for","email",1,"col-form-label","col-sm-2"],["type","email","id","email","formControlName","email",1,"form-control"],[4,"ngIf"],["for","password",1,"col-form-label","col-sm-2"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"form-group","mb-3","row"],["for","confirm",1,"col-form-label","col-sm-2"],["type","password","id","confirm","formControlName","confirm",1,"form-control"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"],[3,"innerHTML"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Register"),e.qZA(),e.YNc(4,v,2,1,"div",3),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return o.registerUser(o.registerForm.value)}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"First Name:"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.qZA()(),e.TgZ(11,"div",5)(12,"label",9),e._uU(13,"Last Name:"),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",5)(17,"label",11),e._uU(18,"Email:"),e.qZA(),e.TgZ(19,"div",7),e._UZ(20,"input",12),e.qZA(),e.TgZ(21,"div",7),e.YNc(22,Z,2,0,"em",13),e.YNc(23,w,2,0,"em",13),e.qZA()(),e.TgZ(24,"div",5)(25,"label",14),e._uU(26,"Password:"),e.qZA(),e.TgZ(27,"div",7),e._UZ(28,"input",15),e.qZA(),e.TgZ(29,"div",7),e.YNc(30,_,2,0,"em",13),e.qZA()(),e.TgZ(31,"div",16)(32,"label",17),e._uU(33,"Confirm Password:"),e.qZA(),e.TgZ(34,"div",7),e._UZ(35,"input",18),e.qZA(),e.TgZ(36,"div",7),e.YNc(37,U,2,0,"em",13),e.YNc(38,C,2,0,"em",13),e.qZA()(),e._UZ(39,"br"),e.TgZ(40,"div",5)(41,"div",19)(42,"button",20),e._uU(43,"Register"),e.qZA()()()()()()),2&i&&(e.xp6(4),e.Q6J("ngIf",o.showError),e.xp6(1),e.Q6J("formGroup",o.registerForm),e.xp6(17),e.Q6J("ngIf",o.validateControl("email")&&o.hasError("email","email")),e.xp6(1),e.Q6J("ngIf",o.validateControl("email")&&o.hasError("email","required")),e.xp6(7),e.Q6J("ngIf",o.validateControl("password")&&o.hasError("password","required")),e.xp6(7),e.Q6J("ngIf",o.validateControl("confirm")&&o.hasError("confirm","required")),e.xp6(1),e.Q6J("ngIf",o.hasError("confirm","mustMatch")),e.xp6(4),e.Q6J("disabled",!o.registerForm.valid))},dependencies:[c.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],styles:["em[_ngcontent-%COMP%]{color:#e71515;font-weight:700}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}.card[_ngcontent-%COMP%]{margin-top:10px;background-color:#fff;box-shadow:1px 1px 1px #cabcbc}"]}),r})();function b(r,s){if(1&r&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.hij(" ",i.errorMessage," ")}}function q(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Username is required"),e.qZA())}function A(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Password is required"),e.qZA())}let N=(()=>{class r{constructor(i,o,l){this.authService=i,this.router=o,this.route=l,this.errorMessage="",this.validateControl=n=>this.loginForm.get(n).invalid&&this.loginForm.get(n).touched,this.hasError=(n,a)=>this.loginForm.get(n).hasError(a),this.loginUser=n=>{this.showError=!1;const a={...n};this.authService.loginUser("api/account/login",{email:a.username,password:a.password}).subscribe({next:d=>{localStorage.setItem("token",d.token),this.authService.sendAuthStateChangeNotification(d.isAuthSuccessful),this.router.navigate([this.returnUrl])},error:d=>{this.errorMessage=d.message,this.showError=!0}})}}ngOnInit(){this.loginForm=new t.cw({username:new t.NI("",[t.kI.required]),password:new t.NI("",[t.kI.required])}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(p.$),e.Y36(u.F0),e.Y36(u.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","username",1,"col-form-label","col-sm-2"],[1,"col-md-5"],["type","text","id","username","formControlName","username",1,"form-control"],[4,"ngIf"],["for","password",1,"col-form-label","col-sm-2"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Login"),e.qZA(),e.YNc(4,b,2,1,"div",3),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return o.loginUser(o.loginForm.value)}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"Username:"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",7),e.YNc(12,q,2,0,"em",9),e.qZA()(),e.TgZ(13,"div",5)(14,"label",10),e._uU(15,"Password:"),e.qZA(),e.TgZ(16,"div",7),e._UZ(17,"input",11),e.qZA(),e.TgZ(18,"div",7),e.YNc(19,A,2,0,"em",9),e.qZA()(),e._UZ(20,"br"),e.TgZ(21,"div",5)(22,"div",12)(23,"button",13),e._uU(24,"Login"),e.qZA()()()()()()),2&i&&(e.xp6(4),e.Q6J("ngIf",o.showError),e.xp6(1),e.Q6J("formGroup",o.loginForm),e.xp6(7),e.Q6J("ngIf",o.validateControl("username")&&o.hasError("username","required")),e.xp6(7),e.Q6J("ngIf",o.validateControl("password")&&o.hasError("password","required")),e.xp6(4),e.Q6J("disabled",!o.loginForm.valid))},dependencies:[c.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u]}),r})(),I=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,t.UX,u.Bz.forChild([{path:"register",component:T},{path:"login",component:N}])]}),r})()}}]);